# With a bunch of help from Mathias Bynens
# https://github.com/mathiasbynens/dotfiles

# settings we’re about to change
osascript -e 'tell application "System Preferences" to quit'



#### GENERAL

# Set computer name (as done via System Preferences → Sharing)
pc_name='tsndre'
sudo scutil --set ComputerName $pc_name 
sudo scutil --set HostName $pc_name 
sudo scutil --set LocalHostName $pc_name
sudo defaults write /Library/Preferences/SystemConfiguration/com.apple.smb.server NetBIOSName -string $pc_name

# Set Colors
defaults write AppleHighlightColor -string "1.000000 0.874510 0.701961 Orange"
defaults write NSGlobalDomain AppleInterfaceStyle -string "Dark"

# Hide Menubar
defaults write NSGlobalDomain _HIHideMenuBar -bool true

# Allow quitting Finder via ⌘ + Q; doing so will also hide desktop icons
defaults write com.apple.finder QuitMenuItem -bool true

# Enable subpixel font rendering on non-Apple LCDs
defaults write NSGlobalDomain AppleFontSmoothing -int 2

# Disable press-and-hold for keys in favor of key repeat
defaults write NSGlobalDomain ApplePressAndHoldEnabled -bool false

# Set a blazingly fast keyboard repeat rate
defaults write NSGlobalDomain KeyRepeat -int 0

# Disable Resume system-wide
defaults write NSGlobalDomain NSQuitAlwaysKeepsWindows -bool false

# Increase window resize speed for Cocoa applications
defaults write NSGlobalDomain NSWindowResizeTime -float 0.001

# Disable the “Are you sure you want to open this application?” dialog
defaults write com.apple.LaunchServices LSQuarantine -bool false

# Disable Resume system-wide
defaults write com.apple.systempreferences NSQuitAlwaysKeepsWindows -bool false



#### POWER SETTINGS 

# Enable lid wakeup
sudo pmset -a lidwake 1 &> /dev/null

# Restart automatically on power loss
sudo pmset -a autorestart 1 &> /dev/null

# Restart automatically if the computer freezes
sudo systemsetup -setrestartfreeze on

# Sleep the display after 15 minutes
sudo pmset -a displaysleep 15 &> /dev/null

# Disable machine sleep while charging
sudo pmset -c sleep 0 &> /dev/null

# Set machine sleep to 5 minutes on battery
sudo pmset -b sleep 10 &> /dev/null

# Set standby delay to 24 hours (default is 1 hour)
sudo pmset -a standbydelay 86400 &> /dev/null

# Never go into computer sleep mode
sudo systemsetup -setcomputersleep Off &> /dev/null

# Hibernation mode
# 0: Disable hibernation (speeds up entering sleep mode)
# 3: Copy RAM to disk so the system state can still be restored in case of a
#    power failure.
sudo pmset -a hibernatemode 0 > /dev/null

# Remove the sleep image file to save disk space
# sudo rm /private/var/vm/sleepimage
# Create a zero-byte file instead…
# sudo touch /private/var/vm/sleepimage
# …and make sure it can’t be rewritten
# sudo chflags uchg /private/var/vm/sleepimage



#### TRACKPAD

# Enable 'tap to click'
defaults write com.apple.driver.AppleBluetoothMultitouch.trackpad Clicking -int 1
defaults write com.apple.AppleMultitouchTrackpad Clicking -int 1



#### FINDER

# Disable window animations and Get Info animations
defaults write com.apple.finder DisableAllAnimations -bool true

# Show icons for hard drives, servers, and removable media on the desktop
defaults write com.apple.finder ShowExternalHardDrivesOnDesktop -bool true
defaults write com.apple.finder ShowHardDrivesOnDesktop -bool true
defaults write com.apple.finder ShowMountedServersOnDesktop -bool true
defaults write com.apple.finder ShowRemovableMediaOnDesktop -bool true

# Avoid creating .DS_Store files on network or USB volumes
defaults write com.apple.desktopservices DSDontWriteNetworkStores -bool true
defaults write com.apple.desktopservices DSDontWriteUSBStores -bool true

# Automatically open a new Finder window when a volume is mounted
defaults write com.apple.frameworks.diskimages auto-open-ro-root -bool true
defaults write com.apple.frameworks.diskimages auto-open-rw-root -bool true
defaults write com.apple.finder OpenWindowForNewRemovableDisk -bool true

# Collapse Tags
defaults write com.apple.finder SidebarTagsSctionDisclosedState -int 0



#### DOCK    

# Speed up Mission Control animations
defaults write com.apple.dock expose-animation-duration -float 0.1

# Set dock icon size to 36px
defaults write com.apple.dock tilesize -int 36

# Show only active applications on dock
defaults write com.apple.dock static-only -bool true

# Don’t animate opening applications from the Dock
defaults write com.apple.dock launchanim -bool false

# Hide Dock
defaults write com.apple.dock autohide -bool true 
defaults write com.apple.dock autohide-delay -float 1000 
defaults write com.apple.dock no-bouncing -bool TRUE



#### SPECTACLE

# Apply preffered keybinds
cp -r mac/spectacle_bindings ~/Library/Application\ Support/Spectacle/Shortcuts.json



#### ITERM2

defaults write com.googlecode.iterm2 TerminalMargin -int 15
defaults write com.googlecode.iterm2 TerminalVMargin -int 5
defaults write com.googlecode.iterm2 WindowNumber -int 0




#### KILL AND FINISH UP

for application in \
	"Dock"\
	"Finder"
do
	killall "$application" &> /dev/null
done

echo "Settings applied, restart your system for driver settings to take effect :)"
